<!doctype html>

<html lang="en">
<head>
  <meta charset="utf-8">
  <title>The HTML5 Herald</title>
  <meta name="description" content="The HTML5 Herald">
  <meta name="author" content="SitePoint">
  <link rel="stylesheet" href="styles.css">
  <link rel="preconnect" href="https://fonts.gstatic.com">
<link href="https://fonts.googleapis.com/css2?family=Special+Elite&display=swap" rel="stylesheet">
</head>

<body>
  <div class="container">
    <div class="content">
      <div>
      <p class="text">On Average Bitcoin Goes Up</p>
      <p class="number transparent" id="number">$4</p>
      <p class="text">Every Day</p>
    </div>
    </div>
    <footer><a href="https://twitter.com/_justinmoon_"> @_justinmoon_</a></footer>
  </div>
</div>
  <script>
    function handleData(data) {
      const genesis = new Date(2009, 1, 3);
      const now = new Date();
      const deltaSeconds = now.getTime() - genesis.getTime();
      const deltaDays = deltaSeconds / (1000 * 3600 * 24);
      const nguDaily = data.ticker.price / deltaDays;
      const el = document.getElementById("number");
      if (el) {
        el.innerHTML = `\$${nguDaily.toFixed(2)}`;
        el.classList.remove("transparent")
      }
    }

    // TODO: error handling
    fetch('https://api.cryptonator.com/api/ticker/btc-usd')
      .then(response => response.json())
      .then(data => handleData(data))
  </script>
</body>
</html>
